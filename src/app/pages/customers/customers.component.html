<div
  class="container bg-white rounded-[15px] border border-[#E6E9EE] shadow-[0_6px_18px_rgba(17,24,39,0.06)] text-[#111827] text-[11px] leading-[15px] font-medium"
>
  <p-toast />
  <p-confirmdialog />

  <div class="header">
    <h1 class="title text-[14px] leading-[17px] font-semibold text-[#111827]">Cadastro Clientes</h1>
  </div>

  <form
    [formGroup]="SearchForm"
    autocomplete="off"
    class="form flex-col md:flex-row md:items-center md:justify-between gap-3"
  >
    <div class="flex items-center gap-3">
      <p-select
        name="filtro"
        [options]="filtros"
        optionLabel="name"
        placeholder="Selecione o filtro"
        [editable]="true"
        [showClear]="true"
        [checkmark]="true"
        formControlName="filtros"
        styleClass="w-full md:w-[280px] h-9 text-[11px]"
      />

      <div class="flex items-center gap-2 w-full">
        <input
          class="w-full md:w-[280px] h-9 px-3 rounded-[8px] border border-[#10B981] placeholder:text-[#6B7280] text-[11px] leading-[15px] text-[#111827] focus:border-[#10B981] focus:ring-1 focus:ring-[#10B981]"
          name="content"
          formControlName="content"
          autocomplete="off"
          placeholder="Digite o termo de busca"
        />

        <label class="sr-only" for="content">Digite o valor do filtro</label>
        <p-button
          label="Listar"
          icon="pi pi-list"
          class="h-9 px-3 rounded-[6px] text-white leading-[15px] font-medium shadow-[0_6px_18px_rgba(17,24,39,0.06)] transition-colors inline-flex items-center justify-center gap-2 border border-[#10B981]"
          aria-label="Listar"
          (click)="onListClick()"
          [disabled]="SearchForm.invalid || loading"
        ></p-button>
      </div>
    </div>

    <div class="footer mt-2 flex justify-end">
      <a
        pButton
        label="Adicionar"
        icon="pi pi-plus"
        class="h-8 px-3 rounded-[6px] text-white text-[11px] leading-[15px] font-medium shadow-[0_6px_18px_rgba(17,24,39,0.06)] transition-colors inline-flex items-center justify-center gap-2"
        aria-label="Adicionar"
        routerLink="/menu/clientes/novo"
      ></a>
    </div>
  </form>

  <p-table
    class="w-full text-[11px] leading-[15px] text-[#111827]"
    [paginator]="true"
    [value]="clients.data"
    [rows]="10"
    [sortField]="'nome'"
    [sortOrder]="1"
    [totalRecords]="clients.total"
    selectionMode="single"
    [lazy]="true"
    [(selection)]="selectedRow"
    (onLazyLoad)="loadItens($event)"
    [showCurrentPageReport]="true"
    currentPageReportTemplate="Mostrando {first} até {last} de {totalRecords}"
    [rowsPerPageOptions]="[5, 10, 20, 30, 40, 50]"
    dataKey="id"
    [rowHover]="true"
    [loading]="loading"
  >
    <ng-template pTemplate="header">
      <tr>
        <th
          pSortableColumn="id"
          class="w-[56px] bg-[#FFF7ED] text-[#111827] font-medium h-10 px-3 border-b border-[#E6E9EE]"
        >
          <div class="flex items-center gap-1">
            <span>ID</span>
            <p-sortIcon field="id"></p-sortIcon>
          </div>
        </th>
        <th
          pSortableColumn="cpf"
          class="bg-[#FFF7ED] text-[#111827] font-medium h-10 px-3 border-b border-[#E6E9EE]"
        >
          <div class="flex items-center gap-1">
            <span>CPF</span>
            <p-sortIcon field="cpf"></p-sortIcon>
          </div>
        </th>
        <th
          pSortableColumn="nome"
          class="bg-[#FFF7ED] text-[#111827] font-medium h-10 px-3 border-b border-[#E6E9EE]"
        >
          <div class="flex items-center gap-1">
            <span>Nome</span>
            <p-sortIcon field="nome"></p-sortIcon>
          </div>
        </th>
        <th
          pSortableColumn="telefone"
          class="bg-[#FFF7ED] text-[#111827] font-medium h-10 px-3 border-b border-[#E6E9EE]"
        >
          <div class="flex items-center gap-1">
            <span>Telefone</span>
            <p-sortIcon field="telefone"></p-sortIcon>
          </div>
        </th>
        <th class="bg-[#FFF7ED] text-[#111827] font-medium h-10 px-3 border-b border-[#E6E9EE]">
          Ações
        </th>
      </tr>
    </ng-template>
    <ng-template pTemplate="body" let-item>
      <tr class="h-10 bg-[#FFF8E5] hover:bg-[#FFFAF2] cursor-pointer">
        <td class="px-3 text-[11px] leading-[15px] text-[#111827]">{{ item.id }}</td>
        <td class="px-3 text-[11px] leading-[15px] text-[#111827]">{{ formatCpf(item.cpf) }}</td>
        <td class="px-3 text-[11px] leading-[15px] text-[#111827]">{{ item.nome }}</td>
        <td class="px-3 text-[11px] leading-[15px] text-[#111827]">
          {{ formatPhone(item.telefone) }}
        </td>
        <td class="px-2">
          <a
            pButton
            icon="pi pi-pencil"
            class="inline-flex items-center justify-center w-8 h-8 rounded-[6px] text-[#EF4444] text-[9px] border border-[#EF4444] bg-transparent hover:bg-[#FFF1F2] shadow-[0_4px_10px_rgba(0,0,0,0.06)]"
            aria-label="Editar"
            [routerLink]="['/menu/clientes/editar', item.id]"
          ></a>
          <a
            pButton
            icon="pi pi-trash"
            class="inline-flex items-center justify-center w-8 h-8 rounded-[6px] text-[#EF4444] text-[9px] border border-[#EF4444] bg-transparent hover:bg-[#FFF1F2] shadow-[0_4px_10px_rgba(0,0,0,0.06)] ml-2"
            aria-label="Excluir"
            (click)="messageConfirmDelete(item)"
          ></a>
        </td>
      </tr>
    </ng-template>
  </p-table>
</div>
